# 通过 mergerfs 实现跨容器的数据共享

在使用docker时，如果容器挂载的目录不通，容器各自挂载目录中的数据希望共享给别的容器是不可能的。本项目采用了一种中转的方式来实现，核心是利用 mergerfs 实现 `ZERO-COPY` 的文件`移动`。

## 设计思路

我们假设多个容器都挂载在某个目录 `BIND_DIR` 下面（可以挂载子目录），然后存在某个中间目录 `BASE_DIR` 作为动态挂载的根目录，`mergerfs` 首先将 `BASE_DIR` 挂载到 `BIND_DIR`，然后将实际的数据目录挂载到 `BASE_DIR` 中。因为我们没有调整容器的挂载目录 `BIND_DIR`，因此容器可以实时看到 `BASE_DIR` 中数据的变化。

## 实现

通过一个带证书认证的 `grpc` 服务来实现，使用方式参考 `client.py` 内容。